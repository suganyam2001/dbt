version: 2

models:
  - name: sug_correlation_metrics
    description: |
      Calculates correlations between state-level median rent and various
      quality of life and income metrics using refined data models.

      **How median rent is calculated:**
      - The median rent is computed for each state from the `refined_housing_data` model.
      - It uses the `PRICE` field and aggregates it by state.

      **Note:**
      - Some QOL metrics (Affordability, Economy, Education/Health, Safety) have been reversed
        (multiplied by -1) to ensure that higher scores consistently indicate better conditions.
      

      This model includes:
        - Income-Rent correlation
        - Affordability-Rent correlation (Reversed)
        - Economy-Rent correlation (Reversed)
        - Education and Health-Rent correlation (Reversed)
        - Safety-Rent correlation (Reversed)

    columns:
      - name: metric
        description: |
          The specific metric pair for correlation (e.g., Income-Rent, Affordability-Rent).
          Note: "Reversed" suffix indicates metrics that have been multiplied by -1
          for interpretability.
        tests:
          - not_null

      - name: correlation
        description: "The computed correlation coefficient between the median rent and the selected metric."
        tests:
          - not_null
          
  - name: price_by_type
    description: |
      Summarizes average and median rental prices based on different housing types
      (e.g., apartment, condo, house) using refined housing data.

      This analysis helps identify how housing type influences rental pricing,
      supporting both business and policy decisions.

      Calculated metrics:
        - Average rent per housing type
        - Median rent per housing type
        - Number of listings per type

    columns:
      - name: type
        description: "The type of housing unit (e.g., apartment, condo, house)."
        tests:
          - not_null

      - name: avg_price
        description: "The average rental price for the given housing type."
        tests:
          - not_null

      - name: median_price
        description: "The median rental price for the given housing type."
        tests:
          - not_null

      - name: listing_count
        description: "The total number of listings for the given housing type."
        tests:
          - not_null